[gd_scene load_steps=39 format=3 uid="uid://c3die3s30ls2x"]

[ext_resource type="Material" uid="uid://cv6yij2k82k62" path="res://materials/ground.tres" id="1_dxvkd"]
[ext_resource type="Script" path="res://scripts/Player.gd" id="1_ji3kl"]
[ext_resource type="Material" uid="uid://b6w0r648pnjxx" path="res://materials/black.tres" id="1_tqd0j"]
[ext_resource type="Material" uid="uid://d1xcswmqy0up4" path="res://materials/goo.tres" id="2_b42hv"]
[ext_resource type="ArrayMesh" uid="uid://bk7f1p5blvqe" path="res://models/viewmodel.obj" id="3_b868p"]
[ext_resource type="ArrayMesh" uid="uid://dxot1ygcupbaj" path="res://models/uzi.obj" id="4_xgpcd"]
[ext_resource type="Script" path="res://scripts/PathFollow3D.gd" id="5_sfbh2"]
[ext_resource type="Script" path="res://scripts/EnemyEncounter.gd" id="6_d5bmd"]
[ext_resource type="PackedScene" uid="uid://vs4nd4kgcowt" path="res://prefabs/skeleton.tscn" id="7_yl78b"]
[ext_resource type="Script" path="res://scripts/UI.gd" id="8_fg4mn"]
[ext_resource type="Shader" path="res://shaders/sky.gdshader" id="10_2dpud"]
[ext_resource type="PackedScene" uid="uid://15n43bg3ue8m" path="res://models/House.gltf" id="11_ehhwd"]
[ext_resource type="PackedScene" uid="uid://c484luve2wx5f" path="res://models/House2.gltf" id="12_ue5ab"]
[ext_resource type="PackedScene" uid="uid://obcdwbj6a7wr" path="res://models/LHouse2.gltf" id="13_7y2no"]
[ext_resource type="PackedScene" uid="uid://b85kloambusr3" path="res://models/LHouse.gltf" id="14_o6ym4"]
[ext_resource type="PackedScene" uid="uid://ceovl8hmkftg5" path="res://models/OakTreeGreen.gltf" id="15_dwo7l"]
[ext_resource type="PackedScene" uid="uid://b3gsokcl6wlnb" path="res://models/OakTreeOrange.gltf" id="16_u2dwg"]
[ext_resource type="PackedScene" uid="uid://8fq2lqik6k88" path="res://models/OakTreeRed.gltf" id="17_mr06c"]
[ext_resource type="PackedScene" uid="uid://qbyqt532jr4m" path="res://models/OakTreeYellow.gltf" id="18_d4y1q"]
[ext_resource type="PackedScene" uid="uid://ci15c358od2n6" path="res://models/PineTree.gltf" id="19_3x7xg"]
[ext_resource type="PackedScene" uid="uid://0l2i2gwgosdo" path="res://models/THouse2.gltf" id="20_2onfp"]
[ext_resource type="PackedScene" uid="uid://ej43v3l4r2ke" path="res://models/THouse.gltf" id="21_oplgo"]
[ext_resource type="PackedScene" uid="uid://l47bw6ev7qgf" path="res://models/UHouse2.gltf" id="22_0neud"]
[ext_resource type="PackedScene" uid="uid://bncaym2h1qjh4" path="res://models/UHouse.gltf" id="23_ynpdj"]
[ext_resource type="PackedScene" uid="uid://brce3jyu3cmov" path="res://models/WillowTreeGreen.gltf" id="24_ho33n"]
[ext_resource type="PackedScene" uid="uid://cqhohdxkchw1l" path="res://models/WillowTreeOrange.gltf" id="25_yqp8u"]
[ext_resource type="PackedScene" uid="uid://b8jegtp1c18a6" path="res://models/WillowTreeRed.gltf" id="26_c60l1"]
[ext_resource type="PackedScene" uid="uid://cc4qhkq3560c6" path="res://models/WillowTreeYellow.gltf" id="27_wwigs"]

[sub_resource type="BoxShape3D" id="BoxShape3D_njgvg"]
size = Vector3(20, 0.1, 20)

[sub_resource type="BoxMesh" id="BoxMesh_3oyeb"]
size = Vector3(20, 0.1, 20)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_x0st1"]

[sub_resource type="BoxShape3D" id="BoxShape3D_duokt"]

[sub_resource type="BoxMesh" id="BoxMesh_1vcqo"]

[sub_resource type="Curve3D" id="Curve3D_w8odi"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -5.512, 1, 3.655, 0.440741, 0.12675, 1.0166, -0.440741, -0.12675, -1.0166, -7.282, 1, -0.145, -1.28863, -0.062552, 0.00341368, 1.28863, 0.062552, -0.00341368, -5.955, 1, -2.673),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[sub_resource type="Curve3D" id="Curve3D_f1v4f"]
_data = {
"points": PackedVector3Array(-4.08113, -0.0543575, -1.05879, 4.08113, 0.0543575, 1.05879, -5.955, 1, -2.673, -2.69664, -0.000843048, 0.77015, 2.69664, 0.000843048, -0.77015, -3.233, 1, -7.858, 0, 0, 0, 0, 0, 0, 3.364, 1, -7.727, 0, 0, 0, 0, 0, 0, 9.3342, 1.03756, -5.54801, 0, 0, 0, 0, 0, 0, 16.4603, 1.08469, -1.61866, 0, 0, 0, 0, 0, 0, 21.3129, 1.12272, 4.52432, 0, 0, 0, 0, 0, 0, 23.5105, 1.14954, 12.9054),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0)
}
point_count = 7

[sub_resource type="ShaderMaterial" id="ShaderMaterial_m6qgg"]
shader = ExtResource("10_2dpud")
shader_parameter/skyColor = Color(0.301961, 0.54902, 1, 1)
shader_parameter/horizonColor = Color(0.701961, 0.803922, 1, 1)

[sub_resource type="Sky" id="Sky_vmk5g"]
sky_material = SubResource("ShaderMaterial_m6qgg")

[sub_resource type="Environment" id="Environment_oefb7"]
background_mode = 2
sky = SubResource("Sky_vmk5g")

[node name="Neighborhood" type="Node"]

[node name="3DWorld" type="Node3D" parent="."]

[node name="Terrain" type="Node3D" parent="3DWorld"]
transform = Transform3D(20, 0, 0, 0, 1, 0, 0, 0, 20, 0, 0, 0)

[node name="Ground" type="StaticBody3D" parent="3DWorld/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="3DWorld/Terrain/Ground"]
shape = SubResource("BoxShape3D_njgvg")

[node name="MeshInstance3D" type="MeshInstance3D" parent="3DWorld/Terrain/Ground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.177233, 0)
material_override = ExtResource("1_dxvkd")
mesh = SubResource("BoxMesh_3oyeb")

[node name="Pile of boxes" type="Node3D" parent="3DWorld/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.49567, 0, -1.95697)

[node name="Player" type="CharacterBody3D" parent="3DWorld" node_paths=PackedStringArray("chosen_path_follow", "reload_text", "bullet_count")]
transform = Transform3D(0.906451, -0.0158823, 0.422013, -9.31323e-10, 0.999292, 0.0376079, -0.422311, -0.0340898, 0.90581, -5.79587, 1.44459, 3.85109)
script = ExtResource("1_ji3kl")
arm_range = Vector2(1.25, 0.625)
arm_base = Vector2(-0.5, 0)
max_ammo = 6
chosen_path_follow = NodePath("../Path3D/PathFollow3D")
reload_timer = 2.0
reload_text = NodePath("../../UI/reload_text")
bullet_count = NodePath("../../UI/bullet_count")

[node name="Viewmodel" type="SoftBody3D" parent="3DWorld/Player"]
transform = Transform3D(0.544639, -0.393732, -0.740503, 0, 0.882947, -0.469472, 0.838671, 0.255692, 0.480888, 0.428, -0.3, -0.416)
material_override = ExtResource("2_b42hv")
mesh = ExtResource("3_b868p")
skeleton = NodePath("../Camera")
collision_layer = 3
collision_mask = 3
parent_collision_ignore = NodePath("..")
linear_stiffness = 0.7
pressure_coefficient = 10.0
drag_coefficient = 1.0
pinned_points = [60, 1006, 1248, 1059, 608, 1274, 560, 1094]
attachments/0/point_index = 60
attachments/0/spatial_attachment_path = NodePath("../ArmAnchor/Markers/Back")
attachments/0/offset = Vector3(-1.48916, -0.29245, -0.230785)
attachments/1/point_index = 1006
attachments/1/spatial_attachment_path = NodePath("../ArmAnchor/Markers/Tip")
attachments/1/offset = Vector3(1.46866, -0.0552672, 0.162607)
attachments/2/point_index = 1248
attachments/2/spatial_attachment_path = NodePath("../ArmAnchor/Markers/Trigger")
attachments/2/offset = Vector3(0.357747, -0.0238528, 0.211393)
attachments/3/point_index = 1059
attachments/3/spatial_attachment_path = NodePath("../ArmAnchor/Uzi")
attachments/3/offset = Vector3(0.136709, 0.143001, -0.215188)
attachments/4/point_index = 608
attachments/4/spatial_attachment_path = NodePath("../ArmAnchor/Markers/Trigger")
attachments/4/offset = Vector3(0.256963, 0.108849, 0.141167)
attachments/5/point_index = 1274
attachments/5/spatial_attachment_path = NodePath("../ArmAnchor/Markers/Trigger")
attachments/5/offset = Vector3(0.304987, 0.092906, 0.322905)
attachments/6/point_index = 560
attachments/6/spatial_attachment_path = NodePath("../ArmAnchor/Uzi")
attachments/6/offset = Vector3(0.0913344, 0.279893, -0.131848)
attachments/7/point_index = 1094
attachments/7/spatial_attachment_path = NodePath("../ArmAnchor/Uzi")
attachments/7/offset = Vector3(0.227882, 0.277671, -0.219239)

[node name="Camera" type="Camera3D" parent="3DWorld/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
current = true
fov = 90.0

[node name="Collider" type="CollisionShape3D" parent="3DWorld/Player"]
shape = SubResource("CapsuleShape3D_x0st1")

[node name="ArmAnchor" type="Node3D" parent="3DWorld/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.7, 0, -0.56492)

[node name="Uzi" type="MeshInstance3D" parent="3DWorld/Player/ArmAnchor"]
transform = Transform3D(-2.98023e-08, 0, -1, 0, 1, 0, 1, 0, -2.98023e-08, 0, -0.0460963, -0.25)
mesh = ExtResource("4_xgpcd")

[node name="Markers" type="Node3D" parent="3DWorld/Player/ArmAnchor"]
transform = Transform3D(0.95882, 0, 0.284015, 0, 1, 0, -0.284015, 0, 0.95882, 0, 0, 0)

[node name="Tip" type="Node3D" parent="3DWorld/Player/ArmAnchor/Markers"]
transform = Transform3D(-2.98023e-08, 0, -1, 0, 1, 0, 1, 0, -2.98023e-08, 0.502319, 0, -1.5)

[node name="Back" type="Node3D" parent="3DWorld/Player/ArmAnchor/Markers"]
transform = Transform3D(-2.98023e-08, 0, -1, 0, 1, 0, 1, 0, -2.98023e-08, -0.504279, -0.00100005, 1.499)

[node name="Trigger" type="Node3D" parent="3DWorld/Player/ArmAnchor/Markers"]
transform = Transform3D(0.999999, 0, -3.8743e-07, 0, 1, 0, 3.8743e-07, 0, 0.999999, 0.0966836, 0.12842, -0.327205)

[node name="reload_timer" type="Timer" parent="3DWorld/Player"]

[node name="StaticBody3D" type="StaticBody3D" parent="3DWorld"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.00421, 1.1991, -2.53903)

[node name="CollisionShape3D" type="CollisionShape3D" parent="3DWorld/StaticBody3D"]
shape = SubResource("BoxShape3D_duokt")

[node name="MeshInstance3D" type="MeshInstance3D" parent="3DWorld/StaticBody3D"]
mesh = SubResource("BoxMesh_1vcqo")

[node name="Path3D" type="Path3D" parent="3DWorld"]
curve = SubResource("Curve3D_w8odi")

[node name="PathFollow3D" type="PathFollow3D" parent="3DWorld/Path3D" node_paths=PackedStringArray("EncounterNode")]
transform = Transform3D(0.906488, 0, 0.422233, 0, 0.999999, 0, -0.422232, 0, 0.906488, -5.512, 1, 3.655)
loop = false
script = ExtResource("5_sfbh2")
Path_Speed = 0.5
EncounterNode = NodePath("../../Node3D")

[node name="Path3D2" type="Path3D" parent="3DWorld"]
transform = Transform3D(0.999704, 0.00562597, -0.0236729, -0.00566812, 0.999982, -0.00171369, 0.0236628, 0.00184738, 0.999718, 0, 0, 0)
curve = SubResource("Curve3D_f1v4f")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="3DWorld/Path3D2"]
transform = Transform3D(1, -1.33659e-08, 5.58794e-09, 1.33659e-08, 1, 4.42378e-09, -5.58794e-09, -4.42378e-09, 1, 0, 0, 0)
material_override = ExtResource("1_tqd0j")
polygon = PackedVector2Array(0, 0, 0.00712574, 0.0765264, 0.999008, 0.118925, 1, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false

[node name="Node3D" type="Node3D" parent="3DWorld" node_paths=PackedStringArray("PathFollow", "Next_Path")]
script = ExtResource("6_d5bmd")
PathFollow = NodePath("../Path3D/PathFollow3D")
Next_Path = NodePath("../Path3D2")

[node name="skeleton" parent="3DWorld/Node3D" instance=ExtResource("7_yl78b")]
transform = Transform3D(-0.131777, 0, 0.789072, 0, 0.8, 0, -0.789072, 0, -0.131777, -1.71171, 0.215585, -2.93914)
spawn_animation = "Spawn"
max_health = 2
activate_delay = 1.5

[node name="skeleton2" parent="3DWorld/Node3D" instance=ExtResource("7_yl78b")]
transform = Transform3D(-0.663097, 0, 0.447551, 0, 0.8, 0, -0.447551, 0, -0.663097, 4.62374, 0.375478, -6.96303)
spawn_animation = "Spawn"
max_health = 3
activate_delay = 0.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="3DWorld"]
environment = SubResource("Environment_oefb7")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="3DWorld/WorldEnvironment"]
transform = Transform3D(0.984057, 0.134254, -0.116652, -0.0456839, 0.824687, 0.563741, 0.171886, -0.549424, 0.817672, 0, 4.95604, 0)

[node name="UI" type="Control" parent="."]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("8_fg4mn")

[node name="reload_text" type="Label" parent="UI"]
visible = false
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -90.0
offset_bottom = 26.0
grow_horizontal = 0
text = "Reloading..."

[node name="bullet_count" type="Label" parent="UI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0

[node name="House" parent="." instance=ExtResource("11_ehhwd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.67459, 1.50497, -33.8889)

[node name="House2" parent="." instance=ExtResource("12_ue5ab")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 19.6947, 0.45092, -31.5021)

[node name="LHouse2" parent="." instance=ExtResource("13_7y2no")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -26.1874, 0.45092, -21.4587)

[node name="LHouse" parent="." instance=ExtResource("14_o6ym4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -32.8873, 0.45092, 0.683613)

[node name="OakTreeGreen" parent="." instance=ExtResource("15_dwo7l")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.2926, 0.45092, -58.4735)

[node name="OakTreeOrange" parent="." instance=ExtResource("16_u2dwg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25.3519, 0.45092, -51.6142)

[node name="OakTreeRed" parent="." instance=ExtResource("17_mr06c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21.9617, 0.45092, -48.6628)

[node name="OakTreeYellow" parent="." instance=ExtResource("18_d4y1q")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25.7055, 0.450924, -45.2513)

[node name="PineTree" parent="." instance=ExtResource("19_3x7xg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.2263, 0.45092, -43.9443)

[node name="THouse2" parent="." instance=ExtResource("20_2onfp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.60741, 0.45092, 35.4307)

[node name="THouse" parent="." instance=ExtResource("21_oplgo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21.6987, 0.45092, 50.017)

[node name="UHouse2" parent="." instance=ExtResource("22_0neud")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.4891, 0.45092, 30.5339)

[node name="UHouse" parent="." instance=ExtResource("23_ynpdj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 72.6375, 0.45092, 26.1383)

[node name="WillowTreeGreen" parent="." instance=ExtResource("24_ho33n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0450778, 0.45092, -67.6657)

[node name="WillowTreeOrange" parent="." instance=ExtResource("25_yqp8u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.02636, 0.45092, -61.4858)

[node name="WillowTreeRed" parent="." instance=ExtResource("26_c60l1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.59156, 0.45092, -63.1739)

[node name="WillowTreeYellow" parent="." instance=ExtResource("27_wwigs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.483973, 0.45092, -56.4987)
